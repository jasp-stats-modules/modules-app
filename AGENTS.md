# context for AI Agents

This file contains instructions and context for AI agents working on this repository.

## Project Overview
The JASP stats modules web app is a Single Page Application (SPA) that allows users to search, filter, and install JASP modules. It is designed to run inside the JASP desktop application but can also operate as a standalone web app.

## Technology Stack
- **Core**: React, TypeScript, Vite
- **Styling**: Tailwind CSS
- **Package Manager**: pnpm
- **State Management**: nuqs (URL query string parsing)
- **Integration**: Qt WebChannel (communication with JASP desktop app)
- **Quality Control**: Biome (linting/formatting)
- **Internationalization**: Intlayer
- **Testing**: Vitest (Unit and Browser tests), Playwright (via Vitest)

## Development Workflow

### Commands
- **Install dependencies**: `pnpm install`
- **Start dev server**: `pnpm dev` (or `pnpm start`)
- **Build for production**: `pnpm build`
- **Type check**: `pnpm typecheck`
- **Lint & Format**: `pnpm check`
- **Scrape data**: `pnpm scrape` (Requires `GITHUB_TOKEN` env var)

### Testing
- **Unit Tests**: `pnpm test`
- **Browser Tests**: `pnpm test:browser` (Interactive), `pnpm test:browser run` (Headless/CI)
- **Coverage**: Add `--coverage` to test commands.

## Key Architecture Concepts

### 1. Data Source (Scraping)
The application relies on a JSON file (`public/index.json`) containing the list of available modules. This file is generated by `src/scrape.ts`, which:
- Fetches data from GitHub GraphQL API.
- Filters for `.JASPModule` assets.
- Parses version compatibility from release descriptions.

### 2. JASP Desktop Integration
- The app communicates with JASP via **Qt WebChannel**.
- When running locally, use search parameters to mock JASP context (see `README.md` Usage section).
- Parameters include: `v` (version), `a` (architecture), `i` (installed modules), `u` (uninstallable modules).

### 3. Internationalization
- **Configuration**: `intlayer.config.ts`
- **Content**: Translation data is stored in `src/**/*.content.tsx` files.
- **Tooling**: Use `intlayer` CLI or VS Code extension.

## File Structure Context
- `src/scrape.ts`: Script for fetching module data.
- `public/`: Static assets, including the generated `index.json`.
- `CONTRIBUTING.md`: Detailed guides for releases and JASP integration testing.
